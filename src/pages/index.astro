---
import { getCollection } from "astro:content";
import { Temporal } from "temporal-polyfill";
import IconFolder from "../components/apache/IconFolder.astro";
import IndexRow from "../components/apache/IndexRow.astro";
import IndexTable from "../components/apache/IndexTable.astro";
import ApacheIndex from "../layouts/ApacheIndex.astro";

const articleLastModifiedAt = (await getCollection("articles"))
  .map((x) => Temporal.Instant.from(x.data.updatedDate ?? x.data.pubDate))
  .sort((a, b) => Temporal.Instant.compare(b, a))[0];
---

<ApacheIndex path="/">
  <IndexTable>
    <IndexRow
      name="articles"
      path="articles/"
      lastModified={articleLastModifiedAt}
    >
      <IconFolder slot="icon" />
    </IndexRow>
  </IndexTable>
</ApacheIndex>
